# Development platforms: CA

The objective of this assignement is to create and host a functional RESTful API. For this course assignement, I choose to make a music-based api, mainly with albums and the songs they contain.

## Datastore
Here, I'll explain how the datastore is structured in this project.
<br>

### Collections:
In MongoDB, data is organized into collections, akin to tables in relational databases. Each collection contains a set of documents.<br>
There are two collections:<br>
- albums
- songs
<br>

### Fields:
Each field represents a specific attribute or piece of data associated with their respective collections.<br>
- 'albums' contains albums with the values: _id, name, artist, year and songs which contains songs that have been added in its array.
- 'songs' contains songs that have been added in a specific album. Every song can be seen in that collection.
<br>

### ObjectId:
ObjectId is a unique identifier generated by MongoDB. In this project, it's mostly used to identify album and song IDs.
<br>

### Interactions:
The interactions with the datastore are handled through MongoDB Node.js, which provides methods for performing CRUD (Create, Read, Update, Delete) operations on the database. These operations are executed within this project's controllers, where it connects to the database, performing the necessary queries, and retrieving or modifying data as needed. <br>
To directly interact with the API, you must make make a request via Postman with the correct method, being: GET, POST, PUT, DELETE. 
<br>

## Endpoints
Here, I'll explain how the endpoints are used, what they do and the correct method for them.

### GET methods (read):
- For searching albums or songs collection<br>
This is when searching the entire collection of albums and songs. 

**GET endpoints:**
```
api-testing-1uft.onrender.com/api/albums
```
```
api-testing-1uft.onrender.com/api/songs
```
<br>

- For searching individual albums or songs<br>
Here, you search for a specific album or song based on their id.

**GET endpoints:**
```
api-testing-1uft.onrender.com/api/albums/:albumId
```
```
api-testing-1uft.onrender.com/api/songs/:songId
```
<br>

- For searching for all songs in one album<br>
This function is exclusive to songs and searches for all songs in a specific album.

**GET endpoints:**
```
api-testing-1uft.onrender.com/api/songs/album/:albumId
```
<br>

### POST methods (create):
- For creating new albums or songs<br>
Here's how you can use the endpoint to create new albums or songs. To create a new album, fill the values this way:
<br>
Albums:
```
{
    "name": "name", 
    "artist": "name", 
    "year": number
}
```
<br>

Songs:
```
{
    "title": "name",
    "duration": "time",
    "album": "Light sides"
}
```
<br>

When assigning an album, the name has to match an existing album's, otherwise, you won't be able to create a new song. 
<br>

**POST endpoints:**
```
api-testing-1uft.onrender.com/api/albums
```
```
api-testing-1uft.onrender.com/api/songs
```
<br>

### PUT methods (update):
- For updating albums or songs<br>
Here, you can change each individual value or more at once if needed. With songs, when changing the album, you also change the song's location, meaning it goes from one album to another.
```
{
    "album": "Newest name"
}
```
<br>

**PUT endpoints:**
```
api-testing-1uft.onrender.com/api/albums/:albumId
```
```
api-testing-1uft.onrender.com/api/songs/:songId
```
<br>

### DELETE methods (delete):
- For deleting an album or song<br>
When deleting an album, everything in it goes away along with the album itself. When deleting a song, it disappears from the songs collection and the songs array in the albums collection.
<br>

**DELETE endpoints:**
```
api-testing-1uft.onrender.com/api/albums/:albumId
```
```
api-testing-1uft.onrender.com/api/songs/:songId
```
<br>

## Results
When properly requested, the data within the collections will change. Whenever you make a Postman request and succeed, feel free to check the urls bellow to see the changes: <br>
**Link to the albums**
```
https://api-testing-1uft.onrender.com/api/albums
```
<br>

**Link to the songs**
```
https://api-testing-1uft.onrender.com/api/songs
```
<br>

The url itself can be manually changed, but the page will appear properly only if the endpoints are correct.